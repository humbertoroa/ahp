<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JsUnit ahpCalc Tests</title>
<link rel="stylesheet" type="text/css" href="../../jsunit/css/jsUnitStyle.css">
<script language="JavaScript" type="text/javascript" src="../../jsunit/app/jsUnitCore.js"></script>

<script language="JavaScript" type="text/javascript" src="../js/testHelper.obj.js"></script>
<script type="text/javascript" src="../js/jquery-1.2.6.js"></script>
<script type="text/javascript" src="../js/ahpCalc.obj.js"></script>
	
<script language="JavaScript" type="text/javascript">
	function testConsistencyIndex() {
		info('testing ahpCalc.consistencyIndex');
	    assert("consistencyIndex array should be defined", testHelper.isArray(ahpCalc.consistencyIndex));
	    assertEquals("consistencyIndex should have a length of 10", 10, ahpCalc.consistencyIndex.length);
	}
	
	function testCalculateResults() {
		info('testing ahpCalc.calculateResults()');
	
		// input result array
		var resultArray = [];
		resultArray[0] = [1, 	1/3, 	2, 		4	];
		resultArray[1] = [3, 	1, 		5, 		3	];
		resultArray[2] = [1/2, 	1/5, 	1, 		1/3	];
		resultArray[3] = [1/4, 	1/3, 	3, 		1	];
		
		// verify result values
		var preCalcResultValues = [.26, .5, .09, .16];
		var results = ahpCalc.calculateResults(resultArray);
		for(var i = 0; i < results.resultColumn.length; i++){
			var result_i = parseFloat(testHelper.convertRealToRoundedPercent(results.resultColumn[i], 2) , 10);
			assertEquals("result " + i + "should be " + preCalcResultValues[i], preCalcResultValues[i], result_i );
		}
		
		// verify cr
		var preCalcCr = .14;
		var cr = parseFloat(testHelper.convertRealToRoundedPercent(results.consistencyRatio, 2) , 10);
		assertEquals("cr should be " + preCalcCr, preCalcCr, cr);
		
		// verify eigen value
		var preCalcAvgEigenValue = 4.37;
		var avgEigenValue = parseFloat(testHelper.convertRealToRoundedPercent(results.eigen.avgEigenValue, 2) , 10);
		assertEquals("average eigen value should be " + preCalcAvgEigenValue, preCalcAvgEigenValue, avgEigenValue);
		
		// verify max eigen value
		var preCalcMaxEigenValue = 4.66;
		var maxEigenValue = parseFloat(testHelper.convertRealToRoundedPercent(results.eigen.maxEigenValue, 2) , 10);
		assertEquals("max eigen value should be " + maxEigenValue, preCalcMaxEigenValue, maxEigenValue);

	}
</script>
</head>

<body>
<h1>JsUnit ahpCalc Tests</h1>

<p>This page contains tests for the JsUnit ahpCalc
    functions. To see them, take a look at the source.</p>
</body>
</html>
